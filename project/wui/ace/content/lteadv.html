<!-- ajax layout which only needs content area -->
<div class="row" id="page-modes">
  <div class="col-xs-12 form-btn-wrapper">
    <!-- PAGE CONTENT BEGINS -->
    <div class="form-horizontal" role="form">


        <!-- Band -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Lock Band"></label>
          <div class="col-sm-9">
            <label>
              <input id="lockband" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div id="band_sets">
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Band"></label>
              <div class="col-sm-9">
                <input type="text" id="band" class="col-xs-10 col-sm-5" maxlength="128" />
              </div>
            </div>
        </div> <!-- band_sets -->
        <!-- Cell -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Lock Cell"></label>
          <div class="col-sm-9">
            <label>
              <input id="lockcell" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div id="cell_sets">
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Cell ID"></label>
              <div class="col-sm-9">
                <input type="text" id="cellid" class="col-xs-10 col-sm-5" maxlength="128" />
              </div>
            </div>
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="arfcn"></label>
              <div class="col-sm-9">
                <input type="text" id="arfcn" class="col-xs-10 col-sm-5" maxlength="128" />
              </div>
            </div>
        </div> <!-- cell_sets -->
        
        <!-- IMEI -->
        <div class="hr hr32 hr-dotted"></div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Lock IMEI"></label>
          <div class="col-sm-9">
            <select class="col-xs-10 col-sm-5" id="lockimei">
              <option value="disable" data-i18n="Disable"></option>
              <option value="enable" data-i18n="First Lock"></option>
              <option value="imei" data-i18n="IMEI"></option>
            </select>
          </div>
        </div>
        <div class="form-group" id="imei_sets">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="IMEI"></label>
          <div class="col-sm-9">
            <input type="text" id="imei" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>

        <!-- IMSI -->
        <div class="hr hr32 hr-dotted"></div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Lock IMSI"></label>
          <div class="col-sm-9">
            <select class="col-xs-10 col-sm-5" id="lockimsi">
              <option value="disable" data-i18n="Disable"></option>
              <option value="enable" data-i18n="First Lock"></option>
              <option value="imsi" data-i18n="IMSI"></option>
            </select>
          </div>
        </div>
        <div class="form-group" id="imsi_sets">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="IMSI"></label>
          <div class="col-sm-9">
            <input type="text" id="imsi" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>

        <!-- SIMCARD -->
        <div class="hr hr32 hr-dotted"></div>
        <div>
        <span class="grey" data-i18n="Check the SIM Card failed time to reset baseband when attaching, reset the baseband and add the <SIM Card failed increment times>, reach the <SIM Card failed max times>"></span>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Check SIM Card"></label>
          <div class="col-sm-9">
            <label>
              <input id="checksim" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div id="sim_sets">
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Need SIM Card"></label>
              <div class="col-sm-9">
                <label>
                  <input id="needsim" class="ace ace-switch ace-switch-6" type="checkbox" />
                  <span class="lbl"></span>
                </label>
              </div>
            </div>
            <div id="sim_reset_sets">
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="SIM Card failed times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checksim2reset" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="SIM Card failed increment times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checksim2reset2add" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="SIM Card failed max times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checksim2reset2max" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
            </div> <!-- sim_reset_sets -->
        </div>  <!-- sim_sets -->

        <!-- Network -->
        <div class="hr hr32 hr-dotted"></div>
        <div>
        <span class="grey" data-i18n="Check the network failed time to reset baseband when attaching, reset the baseband and add the <Network failed increment times>, reach the <Network failed max times>"></span>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Check Network"></label>
          <div class="col-sm-9">
            <label>
              <input id="checknet" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div id="net_sets">
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Need Network"></label>
              <div class="col-sm-9">
                <label>
                  <input id="neednet" class="ace ace-switch ace-switch-6" type="checkbox" />
                  <span class="lbl"></span>
                </label>
              </div>
            </div>
            <div id="net_reset_sets">
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Network failed times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checknet2reset" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Network failed increment times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checknet2reset2add" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Network failed max times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checknet2reset2max" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
            </div> <!-- net_reset_sets -->
        </div> <!-- net_sets -->
        
        <!-- Signal -->
        <div class="hr hr32 hr-dotted"></div>
        <div>
        <span class="grey" data-i18n="Check the signal failed time to reset baseband when attaching, reset the baseband and add the <Signal failed increment times>, reach the <Signal failed max times>"></span>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Check Signal"></label>
          <div class="col-sm-9">
            <label>
              <input id="checksig" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div id="sig_sets">
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Need Signal"></label>
              <div class="col-sm-9">
                <label>
                  <input id="needsig" class="ace ace-switch ace-switch-6" type="checkbox" />
                  <span class="lbl"></span>
                </label>
              </div>
            </div>
            <div id="sig_reset_sets">
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Signal failed times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checksig2reset" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Signal failed increment times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checksig2reset2add" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Signal failed max times"></label>
                  <div class="col-sm-9">
                    <input type="text" id="checksig2reset2max" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
            </div> <!-- sig_sig_sets -->
        </div> <!-- sig_sets -->

        <!-- Watch -->
        <div class="hr hr32 hr-dotted"></div>
        <div>
        <span class="grey" data-i18n="After the baseband is attched will enter intermittently to detect whether the baseband network or signal is effectively"></span>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Watch radio interval"></label>
          <div class="col-sm-9">
            <input type="text" id="watch" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <div class="form-group" id="watch_net_sets">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Watch Network failed times"></label>
          <div class="col-sm-9">
            <input type="text" id="watchnet2quit" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <div class="form-group" id="watch_sig_sets">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Watch Signal failed times"></label>
          <div class="col-sm-9">
            <input type="text" id="watchsig2quit" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>


        <!-- Device -->
        <div class="hr hr32 hr-dotted"></div>
        <div>
        <span class="grey" data-i18n="reset failed <Reset failed times restart> times to restart system"></span>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Reset failed times restart"></label>
          <div class="col-sm-9">
            <input type="text" id="reset2reboot" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>


        <!-- Connect -->
        <div class="hr hr32 hr-dotted"></div>
        <div>
        <span class="grey" data-i18n="dial failed <Dial failed times reset> times to reset the radio, dial failed <Dial failed times restart> to restart the system"></span>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial failed first gate to reset"></label>
          <div class="col-sm-9">
            <input type="text" id="recon2reset_gate" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial failed second gate to reset"></label>
          <div class="col-sm-9">
            <input type="text" id="recon2reset_gate2" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial failed times reset"></label>
          <div class="col-sm-9">
            <input type="text" id="recon2reset" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial failed times restart"></label>
          <div class="col-sm-9">
            <input type="text" id="recon2reboot" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>



      <div class="clearfix form-actions">
        <div class="col-md-offset-3 col-md-9">
          <button class="btn btn-second" type="button" id="refresh"><span data-i18n="Refresh"></span></button>
          &nbsp; &nbsp; &nbsp;
          <button class="btn btn-main" type="button" id="apply"><span data-i18n="Apply"></span></button>
        </div>
      </div>


    </div>
    <!-- PAGE CONTENT ENDS -->
  </div><!-- /.col -->
</div><!-- /.row -->



<!-- page specific plugin scripts -->
<script type="text/javascript">
  (function () {
    /* get the object */
    var lte;
    var ltes;
    var obj = "ifname@lte";
    var index = location.hash.indexOf("obj=");
    if ( index > 0 )
    {
      obj = location.hash.substring( index+4 );
    }
    /* load the configure on the input */
    function lte_load()
    {
      he.load( [ obj ] ).then( function(v){
        lte = v[0];

        /* Band */
        $('#band_sets').hide();
        $('#band').val('');
        if ( !lte.band )
        {
            $('#lockband').prop('checked', false );
        }
        else
        {
            $('#band_sets').show();
            $('#lockband').prop('checked', true );
            $('#band').val( lte.band );
        }
        $('#lockband').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#band_sets').show();
          } 
          else
          {
            $('#band_sets').hide();
          }
        }).trigger('change');
          /* Cell */
          $('#cell_sets').hide();
          $('#arfcn').val('');
          $('#cellid').val('');
          if ( !lte.arfcn || !lte.cellid )
          {
              $('#lockcell').prop('checked', false );
          }
          else
          {
              $('#cell_sets').show();
              $('#lockcell').prop('checked', true );
              $('#arfcn').val( lte.arfcn );
              $('#cellid').val( lte.cellid );
          }
          $('#lockcell').unbind('change').change(function () {
            if ($(this).prop('checked'))
            {
              $('#cell_sets').show();
            } 
            else
            {
              $('#cell_sets').hide();
            }
          }).trigger('change');
        /* IMEI */
        $('#imei').val('');
        $('#lockimei').val("disable");
        $('#imei_sets').hide();
        if ( lte.lockimei )
        {
            if ( lte.lockimei == "enable" )
            {
                $('#lockimei').val("enable");
            }
            else
            {
                $('#imei').val( lte.lockimei );
                $('#lockimei').val("imei");
                $('#imei_sets').show();
            }
        }
        $('#lockimei').unbind('change').change(function (e) {
          var type = e.target.value;
          if ( type == "imei" )
          {
            $('#imei_sets').show();
          }
          else
          {
            $('#imei_sets').hide();
          }
        }).trigger('change');
        /* IMSI */
        $('#imsi').val('');
        $('#lockimsi').val("disable");
        $('#imsi_sets').hide();
        if ( lte.lockimsi )
        {
            if ( lte.lockimsi == "enable" )
            {
                $('#lockimsi').val("enable");
            }
            else
            {
                $('#imsi').val( lte.lockimsi );
                $('#lockimsi').val("imsi");
                $('#imsi_sets').show();
            }
        }
        $('#lockimsi').unbind('change').change(function (e) {
          var type = e.target.value;
          if ( type == "imsi" )
          {
            $('#imsi_sets').show();
          }
          else
          {
            $('#imsi_sets').hide();
          }
        }).trigger('change');
        /* SIMCARD */
        $('#sim_sets').hide();
        $('#sim_reset_sets').hide();
        $('#checksim2reset').val(lte.checksim2reset || '');
        $('#checksim2reset2add').val(lte.checksim2reset2add || '');
        $('#checksim2reset2max').val(lte.checksim2reset2max || '');
        if ( lte.checksim && lte.checksim == "disable" )
        {
            $('#checksim').prop('checked', false );
        }
        else
        {
            $('#sim_sets').show();
            $('#checksim').prop('checked', true );
            if ( lte.needsim && lte.needsim == "disable" )
            {
                $('#needsim').prop('checked', false );
            }
            else
            {
                $('#sim_reset_sets').show();
                $('#needsim').prop('checked', true );
            }
        }
        $('#checksim').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#sim_sets').show();
          } 
          else
          {
            $('#sim_sets').hide();
          }
        }).trigger('change');
        $('#needsim').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#sim_reset_sets').show();
          } 
          else
          {
            $('#sim_reset_sets').hide();
          }
        }).trigger('change');
        /* Network */
        $('#net_sets').hide();
        $('#net_reset_sets').hide();
        $('#watch_net_sets').hide();
        $('#checknet2reset').val(lte.checknet2reset || '');
        $('#checknet2reset2add').val(lte.checknet2reset2add || '');
        $('#checknet2reset2max').val(lte.checknet2reset2max || '');
        if ( lte.checknet && lte.checknet == "disable" )
        {
            $('#checknet').prop('checked', false );
        }
        else
        {
            $('#net_sets').show();
            $('#checknet').prop('checked', true );
            if ( lte.neednet && lte.neednet == "disable" )
            {
                $('#neednet').prop('checked', false );
            }
            else
            {
                $('#watch_net_sets').show();
                $('#net_reset_sets').show();
                $('#neednet').prop('checked', true );
            }
        }
        $('#checknet').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#net_sets').show();
            $('#neednet').trigger('change');
          } 
          else
          {
            $('#net_sets').hide();
            $('#watch_net_sets').hide();
          }
        }).trigger('change');
        $('#neednet').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#net_reset_sets').show();
            $('#watch_net_sets').show();
          } 
          else
          {
            $('#net_reset_sets').hide();
            $('#watch_net_sets').hide();
          }
        }).trigger('change');
        /* Signal */
        $('#sig_sets').hide();
        $('#sig_reset_sets').hide();
        $('#watch_sig_sets').hide();
        $('#checksig2reset').val(lte.checksig2reset || '');
        $('#checksig2reset2add').val(lte.checksig2reset2add || '');
        $('#checksig2reset2max').val(lte.checksig2reset2max || '');
        if ( lte.checksig && lte.checksig == "disable" )
        {
            $('#checksig').prop('checked', false );
        }
        else
        {
            $('#sig_sets').show();
            $('#checksig').prop('checked', true );
            if ( lte.needsig && lte.needsig == "disable" )
            {
                $('#needsig').prop('checked', false );
            }
            else
            {
                $('#watch_sig_sets').show();
                $('#sig_reset_sets').show();
                $('#needsig').prop('checked', true );
            }
        }
        $('#checksig').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#sig_sets').show();
            $('#needsig').trigger('change');
          } 
          else
          {
            $('#sig_sets').hide();
            $('#watch_sig_sets').hide();
          }
        }).trigger('change');
        $('#needsig').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#sig_reset_sets').show();
            $('#watch_sig_sets').show();
          } 
          else
          {
            $('#sig_reset_sets').hide();
            $('#watch_sig_sets').hide();
          }
        }).trigger('change');
        /* Watch */
        $('#watch').val(lte.watch || '');
        $('#watchsig2quit').val(lte.watchsig2quit || '');
        $('#watchnet2quit').val(lte.watchnet2quit || '');
        /* device */
        $('#reset2reboot').val(lte.reset2reboot || '');
        /* Connect */
        $('#recon2reset_gate').val(lte.recon2reset_gate || '');
        $('#recon2reset_gate2').val(lte.recon2reset_gate2 || '');
        $('#recon2reset').val(lte.recon2reset || '');
        $('#recon2reboot').val(lte.recon2reboot || '');


      })
    }


    /* save the configure */
    function lte_save()
    {
      if ( lte == null )
      {
        return;
      }
      var str;
      var ltecopy = JSON.parse(JSON.stringify(lte));;

      /* Band */
      if ( $('#lockband').prop('checked') )
      {
          lte.band = $('#band').val();
          if ( !lte.band )
          {
              delete lte.band;
          }
      }
      else
      {
          delete lte.band;
      }
      /* Cell */
      if ( $('#lockcell').prop('checked') )
      {
          lte.arfcn = $('#arfcn').val();
          lte.cellid = $('#cellid').val();
          if ( !lte.arfcn || !lte.cellid )
          {
              delete lte.arfcn;
              delete lte.cellid;
          }
      }
      else
      {
          delete lte.arfcn;
          delete lte.cellid;
      }
      /* IMEI */
      str = $('#lockimei').val();
      if ( str == "disable" )
      {
        delete lte.lockimei;
      }
      else if ( str == "enable" )
      {
        lte.lockimei = "enable";
      }
      else
      {
          lte.lockimei = $('#imei').val();
      }
      /* IMSI */
      str = $('#lockimsi').val();
      if ( str == "disable" )
      {
        delete lte.lockimsi;
      }
      else if ( str == "enable" )
      {
        lte.lockimsi = "enable";
      }
      else
      {
          lte.lockimsi = $('#imsi').val();
      }
      /* SIMCARD */
      lte.checksim = "disable";
      lte.needsim = "disable";
      if ( $('#checksim').prop('checked') )
      {
          lte.checksim = "enable"
          if ( $('#needsim').prop('checked') )
          {
            lte.needsim = "enable"
            lte.checksim2reset = $('#checksim2reset').val();
            lte.checksim2reset2add = $('#checksim2reset2add').val();
            lte.checksim2reset2max = $('#checksim2reset2max').val();
          }
      }
      /* Network */
      lte.checknet = "disable";
      lte.neednet = "disable";
      if ( $('#checknet').prop('checked') )
      {
          lte.checknet = "enable";
          if ( $('#neednet').prop('checked') )
          {
            lte.neednet = "enable";
            lte.checknet2reset = $('#checknet2reset').val();
            lte.checknet2reset2add = $('#checknet2reset2add').val();
            lte.checknet2reset2max = $('#checknet2reset2max').val();
          }
      }
      /* Signal */
      lte.checksig = "disable";
      lte.needsig = "disable";
      if ( $('#checksig').prop('checked') )
      {
          lte.checksig = "enable";
          if ( $('#needsig').prop('checked') )
          {
            lte.needsig = "enable";
            lte.checksig2reset = $('#checksig2reset').val();
            lte.checksig2reset2add = $('#checksig2reset2add').val();
            lte.checksig2reset2max = $('#checksig2reset2max').val();
          }
      }
      /* Watch */
      lte.watch = $('#watch').val();
      lte.watchsig2quit = $('#watchsig2quit').val();
      lte.watchnet2quit = $('#watchnet2qui').val();
      /* Device */
      lte.reset2reboot = $('#reset2reboot').val();
      /* Connect */
      lte.recon2reset_gate = $('#recon2reset_gate').val();
      lte.recon2reset = $('#recon2reset').val();
      lte.recon2reset = $('#recon2reset').val();
      lte.recon2reset_gate2 = $('#recon2reset_gate2').val();

      if ( ocompare( lte, ltecopy ) )
      {
          page.alert( { message: $.i18n('Settings unchanged') } );
          return;
      }
      page.confirm( { message: $.i18n('The LTE connecttion will be disconneted because of the change of configuration') } ).then( function(result){
        if ( result )
        {
          he.save( [ obj+"="+JSON.stringify(lte)] ).then( function(){
            page.hint2succeed( $.i18n('Modify successfully') );
            lte_load();
          });
        }
      });
    }



    /* init */
    $.i18n().load( page.lang('lte') ).then( function () {
      /* init the langauage */
      $.i18n().locale = lang; $('body').i18n();
      /* load the configure */
      lte_load();

      /* bind the refresh */
      $('#refresh').on(ace.click_event, function () {
        location.reload();
      });
      /* bind the apply */
      $('#apply').on(ace.click_event, function () {
        lte_save();
      });
    });

  })();
</script>
