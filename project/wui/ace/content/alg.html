<!-- ajax layout which only needs content area -->
<div class="row">
    <div class="col-xs-12">
    <!-- PAGE CONTENT BEGINS -->
    <div class="form-horizontal" role="form">


        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="ftp" data-i18n="FTP"></label>
            <div class="col-sm-9">
                <label><input id="ftp" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="pptp" data-i18n="PPTP"></label>
            <div class="col-sm-9">
                <label><input id="pptp" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="gre" data-i18n="GRE"></label>
            <div class="col-sm-9">
                <label><input id="gre" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="rtsp" data-i18n="RTSP"></label>
            <div class="col-sm-9">
                <label><input id="rtsp" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="sip" data-i18n="SIP"></label>
            <div class="col-sm-9">
                <label><input id="sip" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="h323" data-i18n="H323"></label>
            <div class="col-sm-9">
                <label><input id="h323" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>



        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="snmp" data-i18n="SNMP"></label>
            <div class="col-sm-9">
                <label><input id="snmp" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>


        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="tftp" data-i18n="TFTP"></label>
            <div class="col-sm-9">
                <label><input id="tftp" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>



        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="amanda" data-i18n="Amanda"></label>
            <div class="col-sm-9">
                <label><input id="amanda" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="irc" data-i18n="IRC"></label>
            <div class="col-sm-9">
                <label><input id="irc" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>

        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" for="udplite" data-i18n="UDP Lite"></label>
            <div class="col-sm-9">
                <label><input id="udplite" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label>
            </div>
        </div>


        <div class="clearfix form-actions">
            <div class="col-md-offset-3 col-md-9">
                <button class="btn btn-second" type="button" id="refresh"><span data-i18n="Refresh"></span></button>
                &nbsp; &nbsp; &nbsp;
                <button class="btn btn-main" type="button" id="apply"><span data-i18n="Apply"></span></button>
            </div>
        </div>



    </div>
    <!-- PAGE CONTENT ENDS -->
    </div><!-- /.col -->
</div><!-- /.row -->

<!-- page specific plugin scripts -->
<script type="text/javascript">
  (function () {
    var obj = "forward@alg";
    var alg;
    var algcopy;



    /* load the configure fill the page */
    function alg_load()
    {
        he.load( [ obj ] ).then( function(v){
            alg = v[0];
            algcopy = JSON.parse(JSON.stringify(alg));
            if ( !alg )
            {
                return;
            }
            $('#amanda').prop('checked', able2boole( alg.amanda ) );
            $('#ftp').prop('checked', able2boole( alg.ftp ) );
            $('#h323').prop('checked', able2boole( alg.h323 ) );
            $('#irc').prop('checked', able2boole( alg.irc ) );
            $('#pptp').prop('checked', able2boole( alg.pptp ) );
            $('#gre').prop('checked', able2boole( alg.gre ) );
            $('#rtsp').prop('checked', able2boole( alg.rtsp ) );
            $('#sip').prop('checked', able2boole( alg.sip ) );
            $('#snmp').prop('checked', able2boole( alg.snmp ) );
            $('#tftp').prop('checked', able2boole( alg.tftp ) );
            $('#udplite').prop('checked', able2boole( alg.udplite ) );

        });
    }
    function alg_save()
    {
        alg.amanda = boole2able($('#amanda').prop('checked'));
        alg.ftp = boole2able($('#ftp').prop('checked'));
        alg.h323 = boole2able($('#h323').prop('checked'));
        alg.irc = boole2able($('#irc').prop('checked'));
        alg.pptp = boole2able($('#pptp').prop('checked'));
        alg.gre = boole2able($('#gre').prop('checked'));
        alg.rtsp = boole2able($('#rtsp').prop('checked'));
        alg.sip = boole2able($('#sip').prop('checked'));
        alg.snmp = boole2able($('#snmp').prop('checked'));
        alg.tftp = boole2able($('#tftp').prop('checked'));
        alg.udplite = boole2able($('#udplite').prop('checked'));

        if ( ocompare( alg, algcopy ) )
        {
            page.alert( { message: $.i18n('Settings unchanged') } );
            return;
        }
        he.save( [ obj+"="+JSON.stringify(alg) ] ).then( function(){
            page.hint2succeed( $.i18n('Modify successfully') );
            alg_load();
        });
    }
    


    /* init */
    $.i18n().load( page.lang('forward') ).then( function () {
        /* init the langauage */
        $.i18n().locale = window.lang; $('body').i18n();

        /* 加载参数 */
        alg_load();
        /* bind the refresh */
        $('#refresh').on(ace.click_event, function () {
          location.reload();
        });
        /* bind the apply */
        $('#apply').on(ace.click_event, function () {
          alg_save();
        });

    });



  })();
</script>
