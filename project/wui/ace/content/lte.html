<!-- ajax layout which only needs content area -->
<div class="row" id="page-modes">
  <div class="col-xs-12 form-btn-wrapper">
    <!-- PAGE CONTENT BEGINS -->
    <div class="form-horizontal" role="form">


        <!-- 连接状态 -->
        <table class="table table-bordered table-striped">
        <tbody>
            <tr>
                <th data-i18n="Status"></th>
                <td>
                    <span id="lte_status"></span>&nbsp; &nbsp;
                    <a class="btn btn-mini btn-warning" id="lte_btn"><i class="ace-icon fa fa-pause"></i></a>&nbsp;
                </td>
                <th data-i18n="IP Address"></th><td id="lte_ip"></td>
            </tr>
            <tr>
                <th data-i18n="Operator"></th><td id="lte_operator"></td> <th data-i18n="Network"></th><td id="lte_nettype"></td>
            </tr>
            <tr>
                <th data-i18n="RSSI"></th>
                <td>
                    <span><img src="/assets/css/images/signal_0.png" id="lte_rssiimg" class="line-signal"></img></span>
                    <span id="lte_rssi"></span>
                </td>
                <th data-i18n="IMEI"></th>
                <td id="lte_imei"></td>
            </tr>
            <tr>
                <th data-i18n="Live Time"></th><td id="lte_livetime"></td> <th data-i18n="ICCID"></th><td id="lte_iccid"></td>
            </tr>
            <tr>
                <th data-i18n="Rx/Tx"></th><td id="lte_rxtx"></td> <th data-i18n="IMSI"></th><td id="lte_imsi"></td>
            </tr>
        </tbody>
        </table>            



        <div class="hr hr32 hr-dotted"></div>

        <!-- 网络模式 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Attach Mode"></label>
          <div class="col-sm-9">
            <select class="col-xs-10 col-sm-5" id="netmode">
            </select>
          </div>
        </div>

        <!-- 保持指定的模式 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Maintain Network Mode"></label>
          <div class="col-sm-9">
            <select class="col-xs-10 col-sm-5" id="watchnet_mode">
              <option value="disable" data-i18n="Disable"></option>
              <option value="4g" data-i18n="4G"></option>
              <option value="3g4g" data-i18n="3G4G"></option>
            </select>
          </div>
        </div>
        <div id="watchnetSets" style="display: none;">
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Detect Network Mode Times"></label>
            <div class="col-sm-9">
              <input type="text" id="watchnet2reset" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right"></label>
            <div class="col-sm-9">
              <span data-i18n="Network mode is detected every 10 seconds. If the baseband is not in the specified network mode and reaches the specified number of times, the baseband will be restarted" ></span>
            </div>
          </div>
        </div> <!-- watchnetSets -->

        <div class="hr hr32 hr-dotted"></div>


        <!-- APN自定义 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="APN Custom"></label>
          <div class="col-sm-9">
            <label>
              <input id="operator" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <!-- APN列表 -->
        <div class="form-group" id="apnList" style="display: none;">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="APN List"></label>
          <div class="col-sm-9">
            <div class="col-sm-9 form-right-text">
              <span class="link second-color" id="apn_list" data-i18n="Edit"></span>
            </div>
          </div>
        </div>
        <div id="apnSets" style="display: none;">
          <!-- APN -->
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="APN"></label>
            <div class="col-sm-9">
              <input type="text" id="apn" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
          <!-- 用户名 -->
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Username"></label>
            <div class="col-sm-9">
              <input type="text" id="user" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
          <!-- 密码 -->
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Password"></label>
            <div class="col-sm-9">
              <span class="input-icon input-icon-right input-icon-form col-xs-10 col-sm-5">
                <input type="password" id="password" maxlength="128" autocomplete="new-password" />
                <i class="ace-icon fa fa-eye-slash" id="password-icon"></i>
              </span>
            </div>
          </div>
          <!-- IP方式 -->
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="IP Type"></label>
            <div class="col-sm-9">
              <select class="col-xs-10 col-sm-5" id="type">
                <option value="ipv4" data-i18n="IP"></option>
                <option value="ipv4v6" data-i18n="IPv4v6"></option>
                <option value="ipv6" data-i18n="IPv6"></option>
              </select>
            </div>
          </div>
          <!-- 鉴权方式 -->
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Authentication"></label>
            <div class="col-sm-9">
              <select class="col-xs-10 col-sm-5" id="auth">
                <option value="" data-i18n="Auto"></option>
                <option value="disable" data-i18n="None"></option>
                <option value="pap" data-i18n="PAP"></option>
                <option value="chap" data-i18n="CHAP"></option>
                <option value="papchap" data-i18n="PAP&CHAP"></option>
              </select>
            </div>
          </div>
          <!-- 拨号号码 -->
          <div class="form-group" name="apnadv"  style="display: none;">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial Number"></label>
            <div class="col-sm-9">
              <input type="text" id="dial" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
          <!-- 拨号CID -->
          <div class="form-group" name="apnadv"  style="display: none;">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial CID"></label>
            <div class="col-sm-9">
              <input type="text" id="cid" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
        </div>
        <!-- PIN码 -->
        <div class="form-group" name="apnadv"  style="display: none;">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="PIN Code"></label>
          <div class="col-sm-9">
            <input type="text" id="pin" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 显示更多 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Detail Settings"></label>
          <div class="col-sm-9">
            <label>
              <input id="detail" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div class="hr hr32 hr-dotted"></div>


        <!-- 备卡设置 -->
        <div id="bsimSets" style="display: none;">
          <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Backup SIM Card"></label>
              <div class="col-sm-9"><label><input id="bsim" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label></div>
          </div>
          <div id="bsimConfigs" style="display: none;">
		      <!-- 当前状态 -->
		      <div class="form-group">
	   	          <label class="col-sm-3 control-label no-padding-right" data-i18n="Current Simcard state"></label>
	   	          <div class="col-sm-9 form-right-text">
	   	            <span id="bsim_state"></span>
	   	          </div>
		      </div>
		      <!-- 备卡模式 -->
              <div class="form-group" name="bsim_apnadv"  style="display: none;">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="Simcard select"></label>
                  <div class="col-sm-9">
                    <select class="col-xs-10 col-sm-5" id="bsim_mode">
                      <option value="" data-i18n="Auto"></option>
                      <option value="msim" data-i18n="Main simcard"></option>
                      <option value="bsim" data-i18n="Backup simcard"></option>
                    </select>
                  </div>
              </div>
              <!-- 备卡切换检查卡次数 -->
              <div class="form-group" name="bsim_apnadv"  style="display: none;">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="Simcard failed switch"></label>
                <div class="col-sm-9"><input type="text" id="bsim_simcard_failed" class="col-xs-10 col-sm-5" maxlength="20" /></div>
              </div>
              <!-- 备卡切换检查网络次数 -->
              <div class="form-group" name="bsim_apnadv"  style="display: none;">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="Network failed switch"></label>                <div class="col-sm-9"><input type="text" id="bsim_network_failed" class="col-xs-10 col-sm-5" maxlength="20" /></div>
              </div>
              <!-- 备卡切换检查信号次数 -->
              <div class="form-group" name="bsim_apnadv"  style="display: none;">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="Signal failed switch"></label>
                <div class="col-sm-9"><input type="text" id="bsim_signal_failed" class="col-xs-10 col-sm-5" maxlength="20" /></div>
              </div>
              <!-- 备卡切换拨号次数 -->
              <div class="form-group" name="bsim_apnadv"  style="display: none;">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial failed switch"></label>                <div class="col-sm-9"><input type="text" id="bsim_dial_failed" class="col-xs-10 col-sm-5" maxlength="20" /></div>
              </div>

              <!-- 备卡APN自定义 -->
              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM APN Custom"></label>
                <div class="col-sm-9"><label><input id="bsim_operator" class="ace ace-switch ace-switch-6" type="checkbox" /><span class="lbl"></span></label></div>
              </div>
              <div id="bsim_apnSets" style="display: none;">
                <!-- 备卡APN -->
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM APN"></label>
                  <div class="col-sm-9"><input type="text" id="bsim_apn" class="col-xs-10 col-sm-5" maxlength="128" /></div>
                </div>
                <!-- 备卡用户名 -->
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM Username"></label>
                  <div class="col-sm-9"><input type="text" id="bsim_user" class="col-xs-10 col-sm-5" maxlength="128" /></div>
                </div>
                <!-- 备卡密码 -->
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM Password"></label>
                  <div class="col-sm-9">
                    <span class="input-icon input-icon-right input-icon-form col-xs-10 col-sm-5">
                      <input type="password" id="bsim_password" maxlength="128" autocomplete="new-password" />
                      <i class="ace-icon fa fa-eye-slash" id="bsim_password-icon"></i>
                    </span>
                  </div>
                </div>
                <!-- 备卡IP方式 -->
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM IP Type"></label>
                  <div class="col-sm-9">
                    <select class="col-xs-10 col-sm-5" id="bsim_type">
                      <option value="" data-i18n="IP"></option>
                      <option value="ipv4v6" data-i18n="IPv4v6"></option>
                      <option value="ipv6" data-i18n="IPv6"></option>
                    </select>
                  </div>
                </div>
                <!-- 备卡鉴权方式 -->
                <div class="form-group">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM Authentication"></label>
                  <div class="col-sm-9">
                    <select class="col-xs-10 col-sm-5" id="bsim_auth">
                      <option value="" data-i18n="Auto"></option>
                      <option value="disable" data-i18n="None"></option>
                      <option value="pap" data-i18n="PAP"></option>
                      <option value="chap" data-i18n="CHAP"></option>
                      <option value="papchap" data-i18n="PAP&CHAP"></option>
                    </select>
                  </div>
                </div>
                <!-- 备卡拨号号码 -->
                <div class="form-group" name="bsim_apnadv"  style="display: none;">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM Dial Number"></label>
                  <div class="col-sm-9"><input type="text" id="bsim_dial" class="col-xs-10 col-sm-5" maxlength="128" /></div>
                </div>
                <!-- 备卡拨号CID -->
                <div class="form-group" name="bsim_apnadv"  style="display: none;">
                  <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM Dial CID"></label>
                  <div class="col-sm-9"><input type="text" id="bsim_cid" class="col-xs-10 col-sm-5" maxlength="128" /></div>
                </div>
              </div> <!-- bsim_apnSets -->
              <!-- 备卡PIN码 -->
              <div class="form-group" name="bsim_apnadv"  style="display: none;">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="BSIM PIN Code"></label>
                <div class="col-sm-9">
                  <input type="text" id="bsim_pin" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
              </div>

              <!-- 显示更多 -->
              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="Detail Settings"></label>
                <div class="col-sm-9">
                  <label>
                    <input id="bsim_detail" class="ace ace-switch ace-switch-6" type="checkbox" />
                    <span class="lbl"></span>
                  </label>
                </div>
              </div>
          </div> <!-- bsimConfigs -->
        <div class="hr hr32 hr-dotted"></div>
        </div><!-- bsimSets -->



        <!-- IPV4拨号模式 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Dial Mode"></label>
          <div class="col-sm-9">
            <select class="col-xs-10 col-sm-5" id="dialmode">
            </select>
          </div>
        </div>

        <!-- PPP设置-->
        <div id="pppSets" style="display: none;" >
            <!-- mtu -->
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="MTU"></label>
                <div class="col-sm-9">
                  <input type="text" id="mtu" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
            </div>
            <!-- lcp 间隔 -->
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="LCP Echo Interval"></label>
                <div class="col-sm-9">
                  <input type="text" id="lcp_echo_interval" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
            </div>
            <!-- lcp 失败次数 -->
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="LCP Echo Times"></label>
                <div class="col-sm-9">
                  <input type="text" id="lcp_echo_failure" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
            </div>
            <!-- PPP选项 -->
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="PPP Option"></label>
                <div class="col-sm-9">
                  <textarea type="text" id="pppopt" class="col-xs-10 col-sm-5" maxlength="1024" />
                </div>
            </div>
        </div> <!-- pppSets -->

        <!-- Static设置-->
        <div id="staticSets" style="display: none;" >
            <!-- IP地址 -->
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="IP Address"></label>
                <div class="col-sm-9">
                  <div class="clearfix">
                    <input type="text" id="ip" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
            </div>
      
            <!-- 掩码 -->
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="Subnet Mask"></label>
                <div class="col-sm-9">
                  <div class="clearfix">
                    <input type="text" id="mask" class="col-xs-10 col-sm-5" maxlength="128" />
                  </div>
                </div>
            </div>
            <!-- 网关 -->
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Gateway"></label>
              <div class="col-sm-9">
                <div class="clearfix">
                  <input type="text" id="gw" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
              </div>
            </div>
      
            <!-- DNS -->
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="DNS"></label>
              <div class="col-sm-9">
                <div class="clearfix">
                  <input type="text" id="dns" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
              </div>
            </div>
      
            <!-- DNS2 -->
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="DNS2"></label>
              <div class="col-sm-9">
                <div class="clearfix">
                  <input type="text" id="dns2" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
              </div>
            </div>
        </div> <!-- staticSets -->
  

        <!-- 自定义DNS -->
        <div id="custom_dns-select" style="display: none;">
            <div class="form-group">
              <label class="col-sm-3 control-label no-padding-right" data-i18n="Custom DNS"></label>
              <div class="col-sm-9">
                <label>
                  <input id="custom_dns" class="ace ace-switch ace-switch-6" type="checkbox" />
                  <span class="lbl"></span>
                </label>
              </div>
            </div>
            <div id="custom_dns-sets" style="display: none;">
              <!-- DNS -->
              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="DNS"></label>
                <div class="col-sm-9">
                  <input type="text" id="cdns" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
              </div>
              <!-- DNS2 -->
              <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" data-i18n="DNS2"></label>
                <div class="col-sm-9">
                  <input type="text" id="cdns2" class="col-xs-10 col-sm-5" maxlength="128" />
                </div>
              </div>
            </div>
        </div>
        
        <!-- IP伪装 -->
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="IP Masquerade(NAT)"></label>
            <div class="col-sm-9">
                <label>
                    <input id="masq" class="ace ace-switch ace-switch-6" type="checkbox" />
                    <span class="lbl"></span>
                </label>
            </div>
        </div>
  


<div id="ipv6Sets" style="display: none;" >

    <div class="hr hr32 hr-dotted"></div>
    <!-- IPV6拨号模式 -->
    <div class="form-group">
      <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 Mode"></label>
      <div class="col-sm-9">
        <select class="col-xs-10 col-sm-5" id="method">
          <option value="disable" data-i18n="Disable"></option>
          <option value="slaac" data-i18n="SLAAC"></option>
          <!-- <option value="automatic" data-i18n="Automatic"></option>
          <option value="manual" data-i18n="Manual"></option> -->
        </select>
      </div>
    </div>

    <!-- Manual设置 -->
    <div id="manualSets" style="display: none;" >
        <!-- IPV6地址 -->
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 Address"></label>
            <div class="col-sm-9">
              <div class="clearfix">
                <input type="text" id="addr" class="col-xs-10 col-sm-5" maxlength="128" />
              </div>
            </div>
        </div>
  
        <!-- 掩码 -->
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="Subnet Prefix"></label>
            <div class="col-sm-9">
              <div class="clearfix">
                <input type="text" id="prefix" class="col-xs-10 col-sm-5" maxlength="128" />
              </div>
            </div>
        </div>
        <!-- 网关 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Next Hop"></label>
          <div class="col-sm-9">
            <div class="clearfix">
              <input type="text" id="hop" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
        </div>
  
        <!-- DNS -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 DNS"></label>
          <div class="col-sm-9">
            <div class="clearfix">
              <input type="text" id="resolve" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
        </div>
  
        <!-- DNS2 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 DNS2"></label>
          <div class="col-sm-9">
            <div class="clearfix">
              <input type="text" id="resolve2" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
        </div>
    </div> <!-- manualSets -->

    <!-- 自定义IPV6 DNS
    <div id="custom_resolve-select" style="display: none;">
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Custom IPv6 DNS"></label>
          <div class="col-sm-9">
            <label>
              <input id="custom_resolve" class="ace ace-switch ace-switch-6" type="checkbox" />
              <span class="lbl"></span>
            </label>
          </div>
        </div>
        <div id="custom_resolve-sets" style="display: none;">
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 DNS"></label>
            <div class="col-sm-9">
              <input type="text" id="cresolve" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
          <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 DNS2"></label>
            <div class="col-sm-9">
              <input type="text" id="cresolve2" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
        </div>
    </div> 
    
    <div id="masqueradeSets" style="display: none;" >
        <div class="form-group">
            <label class="col-sm-3 control-label no-padding-right" data-i18n="IPv6 Masquerade(NAT)"></label>
            <div class="col-sm-9">
                <label>
                    <input id="masquerade" class="ace ace-switch ace-switch-6" type="checkbox" />
                    <span class="lbl"></span>
                </label>
            </div>
        </div>
    </div> -->


    
</div> <!-- ipv6Sets -->






      <div class="hr hr32 hr-dotted"></div>
      <!-- 保活模式 -->
      <div class="form-group">
        <label class="col-sm-3 control-label no-padding-right" data-i18n="Availability Check"></label>
        <div class="col-sm-9">
          <select class="col-xs-10 col-sm-5" id="keeplive">
            <option value="watch" data-i18n="Disable"></option>
            <option value="icmp" data-i18n="ICMP"></option>
            <option value="recv" data-i18n="Receive Count"></option>
          </select>
        </div>
      </div>
      <!-- icmp配置 -->
      <div id="icmpSets" style="display: none;">
        <!-- 地址 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Test Address"></label>
          <div class="col-sm-9">
            <div class="clearfix">
              <input type="text" id="icmp_test" class="col-xs-10 col-sm-5" maxlength="128" />
            </div>
          </div>
        </div>
        <!-- 地址2 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Test Address 2"></label>
          <div class="col-sm-9">
            <input type="text" id="icmp_test2" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 地址3 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Test Address 3"></label>
          <div class="col-sm-9">
            <input type="text" id="icmp_test3" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 超时 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Each Query Timeout(sec)"></label>
          <div class="col-sm-9">
            <input type="text" id="icmp_timeout" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 次数 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Test Times"></label>
          <div class="col-sm-9">
            <input type="text" id="icmp_failed" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 间隔 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Test Interval(sec)"></label>
          <div class="col-sm-9">
            <input type="text" id="icmp_interval" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
      </div>
      <!-- Receive配置 -->
      <div id="recvSets" style="display: none;">
        <!-- 超时 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Duration(sec)"></label>
          <div class="col-sm-9">
            <input type="text" id="recv_timeout" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 次数 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Test Times"></label>
          <div class="col-sm-9">
            <input type="text" id="recv_failed" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
        <!-- 包数 -->
        <div class="form-group">
          <label class="col-sm-3 control-label no-padding-right" data-i18n="Request packets"></label>
          <div class="col-sm-9">
            <input type="text" id="recv_packets" class="col-xs-10 col-sm-5" maxlength="128" />
          </div>
        </div>
      </div>


     <div class="hr hr32 hr-dotted"></div>
     <!-- GPS -->
     <div class="form-group">
       <label class="col-sm-3 control-label no-padding-right" data-i18n="GPS"></label>
       <div class="col-sm-9">
         <label>
           <input id="gnss" class="ace ace-switch ace-switch-6" type="checkbox" />
           <span class="lbl"></span>
         </label>
       </div>
     </div>      

      <div class="clearfix form-actions">
        <div class="col-md-offset-3 col-md-9">
          <button class="btn btn-second" type="button" id="refresh"><span data-i18n="Refresh"></span></button>
          &nbsp; &nbsp; &nbsp;
          <button class="btn btn-main" type="button" id="apply"><span data-i18n="Apply"></span></button>
        </div>
      </div>


    </div>
    <!-- PAGE CONTENT ENDS -->
  </div><!-- /.col -->
</div><!-- /.row -->



<!-- page specific plugin scripts -->
<script type="text/javascript">
  (function () {
    /* get the object */
    var lte;
    var ltes;
    var obj = "ifname@lte";
    var index = location.hash.indexOf("obj=");
    if ( index > 0 )
    {
      obj = location.hash.substring( index+4 );
    }
    /* load the configure on the input */
    function lte_load()
    {
      he.load( [ obj ] ).then( function(v){
        lte = v[0];
        /* Modem */
        $('#netmode').val(lte.netmode || 'auto');
        $('#watchnet_mode').val(lte.watchnet_mode || 'disable');
        $('#watchnet2reset').val(lte.watchnet2reset|| '' );
        if ( lte.bsim )
        {
            $('#bsimSets').show();
            $('#bsim').prop('checked', able2boole(lte.bsim) );
            if ( lte.bsim_cfg )
            {
		        $('#bsim_mode').val( lte.bsim_cfg.mode || '');
		        $('#bsim_simcard_failed').val( lte.bsim_cfg.simcard_failed || '');
		        $('#bsim_network_failed').val( lte.bsim_cfg.network_failed || '');
		        $('#bsim_signal_failed').val( lte.bsim_cfg.signal_failed || '');
		        $('#bsim_dial_failed').val( lte.bsim_cfg.dial_failed || '');
                if ( lte.bsim_cfg.operator == "enable" )
                {
                    $('#bsim_operator').prop('checked', true );
                }
                else
                {
                    $('#bsim_operator').prop('checked', false );
                }
                if ( lte.bsim_cfg.operator_cfg )
                {
                  $('#bsim_dial').val(lte.bsim_cfg.operator_cfg.dial);
                  $('#bsim_apn').val(lte.bsim_cfg.operator_cfg.apn);
                  $('#bsim_user').val(lte.bsim_cfg.operator_cfg.user);
                  $('#bsim_password').val(lte.bsim_cfg.operator_cfg.passwd);
                  $('#bsim_type').val(lte.bsim_cfg.operator_cfg.type);
                  $('#bsim_auth').val(lte.bsim_cfg.operator_cfg.auth);
                  $('#bsim_cid').val(lte.bsim_cfg.operator_cfg.cid);
                }
            }
            $('#bsim').unbind('change').change(function () {
              if ($(this).prop('checked'))
              {
                $('#bsimConfigs').show();
              } 
              else
              {
                $('#bsimConfigs').hide();
              }
            }).trigger('change');
        }
        if ( lte.operator == "enable" )
        {
            $('#operator').prop('checked', true );
        }
        else
        {
            $('#operator').prop('checked', false );
        }
        if ( lte.operator_cfg )
        {
          $('#dial').val(lte.operator_cfg.dial);
          $('#apn').val(lte.operator_cfg.apn);
          $('#user').val(lte.operator_cfg.user);
          $('#password').val(lte.operator_cfg.passwd);
          $('#type').val(lte.operator_cfg.type);
          $('#auth').val(lte.operator_cfg.auth);
          $('#cid').val(lte.operator_cfg.cid);
        }
        else
        {
            if ( ltes && ltes.operator_advise )
            {
                $('#dial').val(ltes.operator_advise.dial);
                $('#apn').val(ltes.operator_advise.apn);
                $('#user').val(ltes.operator_advise.user);
                $('#password').val(ltes.operator_advise.passwd);
                $('#type').val(ltes.operator_advise.type);
                $('#auth').val(ltes.operator_advise.auth);
                $('#cid').val(ltes.operator_advise.cid);
            }
        }
        $('#pin').val(lte.pin);
        $('#gnss').prop('checked',  false );
        if ( lte.gnss && lte.gnss.status == "enable" )
        {
            $('#gnss').prop('checked',  true );
        }
        /* IPV4 */
        $('#masq').prop('checked', able2boole(lte.masq));
        $('#dialmode').val(lte.mode || '');
        if ( lte.ppp )
        {
          $('#mtu').val(lte.ppp.mtu);
          $('#lcp_echo_interval').val(lte.ppp.lcp_echo_interval);
          $('#lcp_echo_failure').val(lte.ppp.lcp_echo_failure);
          $('#pppopt').val(lte.ppp.pppopt);
        }
        if ( lte.static )
        {
          if ( lte.static.ipaddr )
          {
            $('#ip').val(lte.static.ipaddr.ip);
            $('#mask').val(lte.static.ipaddr.mask);
          }
          $('#gw').val(lte.static.gw);
          $('#dns').val(lte.static.dns);
          $('#dns2').val(lte.static.dns2);
        }
        $('#keeplive').val( lte.keeplive.type || 'disable');
        if ( lte.keeplive.icmp )
        {
          if (lte.keeplive.icmp.dest)
          {
            $('#icmp_test').val(lte.keeplive.icmp.dest.test)
            $('#icmp_test2').val(lte.keeplive.icmp.dest.test2)
            $('#icmp_test3').val(lte.keeplive.icmp.dest.test3)
          }
          $('#icmp_timeout').val(lte.keeplive.icmp.timeout);
          $('#icmp_failed').val(lte.keeplive.icmp.failed);
          $('#icmp_interval').val(lte.keeplive.icmp.interval);
        }
        if ( lte.keeplive.recv )
        {
          $('#recv_timeout').val(lte.keeplive.recv.timeout);
          $('#recv_failed').val(lte.keeplive.recv.failed);
          $('#recv_packets').val(lte.keeplive.recv.packets);
        }
        /* IPV6 */
        if ( lte.method )
        {
            $('#ipv6Sets').show();
            $('#method').val(lte.method);
            if ( lte.manual )
            {
              if ( lte.manual.addr )
              {
                $('#addr').val(lte.manual.addr);
                $('#prefix').val(lte.manual.prefix);
              }
              $('#hop').val(lte.manual.hop);
              $('#resolve').val(lte.manual.resolve);
              $('#resolve2').val(lte.manual.resolve2);
            }
            $('#masquerade').prop('checked', able2boole(lte.masquerade));
        }

        /* Modem */
        $('#watchnet_mode').unbind('change').change(function (e) {
          var type = e.target.value;
          if ( type == "4g" || type == "3g4g" )
          {
            $('#watchnetSets').show();
          }
          else
          {
            $('#watchnetSets').hide();
          }
        }).trigger('change');
          /* simcard APN */
        $('#operator').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#apnSets').show();
            $('#apnList').hide();
          } 
          else
          {
            $('#apnSets').hide();
            $('#apnList').hide();
          }
        }).trigger('change');
        $('#detail').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $("[name='apnadv']").show();
          } 
          else
          {
            $("[name='apnadv']").hide();
          }
        }).trigger('change');
        /* back simcard APN */
        $('#bsim_operator').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#bsim_apnSets').show();
          } 
          else
          {
            $('#bsim_apnSets').hide();
          }
        }).trigger('change');
        $('#bsim_detail').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $("[name='bsim_apnadv']").show();
          } 
          else
          {
            $("[name='bsim_apnadv']").hide();
          }
        }).trigger('change');
        /* IPV4 */
        $('#custom_dns').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#custom_dns-sets').show();
          }
          else
          {
            $('#custom_dns-sets').hide();
          }
        }).trigger('change');
        $('#dialmode').unbind('change').change(function (e) {
          var type = e.target.value;
          switch (type)
          {
            case '':
                $('#staticSets').hide();
                $('#pppSets').hide();
                $('#custom_dns-select').hide();
                break;
            case 'dhcpc':
              $('#staticSets').hide();
              $('#pppSets').hide();
              $('#custom_dns-select').show();
              if ( lte.dhcpc )
              {
                $('#custom_dns').prop('checked', able2boole(lte.dhcpc.custom_dns));
                $('#cdns').val( lte.dhcpc.dns );
                $('#cdns2').val( lte.dhcpc.dns2 );
              }
              if ($('#custom_dns').prop('checked'))
              {
                $('#custom_dns-sets').show();
              }
              else
              {
                $('#custom_dns-sets').hide();
              }
              break;
            case 'static':
              $('#staticSets').show();
              $('#pppSets').hide();
              $('#custom_dns-select').hide();
              break;
            case 'ppp':
              $('#staticSets').hide();
              $('#pppSets').show();
              $('#custom_dns-select').show();
              if ( lte.ppp )
              {
                $('#custom_dns').prop('checked', able2boole(lte.ppp.custom_dns));
                $('#cdns').val( lte.ppp.dns );
                $('#cdns2').val( lte.ppp.dns2 );
              }
              if ($('#custom_dns').prop('checked'))
              {
                $('#custom_dns-sets').show();
              }
              else
              {
                $('#custom_dns-sets').hide();
              }
              break;
          }
        }).trigger('change');
        $('#keeplive').unbind('change').change(function (e) {
          var type = e.target.value;
          switch (type)
          {
            case 'disable':
              $('#icmpSets').hide();
              $('#recvSets').hide();
              break;
            case 'watch':
              $('#icmpSets').hide();
              $('#recvSets').hide();
              break;
            case 'icmp':
              $('#icmpSets').show();
              $('#recvSets').hide();
              break;
            case 'recv':
              $('#icmpSets').hide();
              $('#recvSets').show();
              break;
          }
        }).trigger('change');
        /* IPV6 */
        $('#custom_resolve').unbind('change').change(function () {
          if ($(this).prop('checked'))
          {
            $('#custom_resolve-sets').show();
          }
          else
          {
            $('#custom_resolve-sets').hide();
          }
        }).trigger('change');
        $('#method').unbind('change').change(function (e) {
          var type = e.target.value;
          switch (type)
          {
            case 'disable':
                $('#manualSets').hide();
                $('#masqueradeSets').hide();
                $('#custom_resolve-select').hide();
                break;
            case 'slaac':
                $('#manualSets').hide();
                $('#masqueradeSets').show();
                $('#custom_resolve-select').show();
                if ( lte.slaac )
                {
                  $('#custom_resolve').prop('checked', able2boole(lte.slaac.custom_resolve));
                  $('#cresolve').val( lte.slaac.resolve );
                  $('#cresolve2').val( lte.slaac.resolve2 );
                }
                if ($('#custom_resolve').prop('checked'))
                {
                  $('#custom_resolve-sets').show();
                }
                else
                {
                  $('#custom_resolve-sets').hide();
                }
                break;
            case 'automatic':
                $('#manualSets').hide();
                $('#masqueradeSets').show();
                $('#custom_resolve-select').show();
                if ( lte.automatic )
                {
                  $('#custom_resolve').prop('checked', able2boole(lte.automatic.custom_resolve));
                  $('#cresolve').val( lte.automatic.resolve );
                  $('#cresolve2').val( lte.automatic.resolve2 );
                }
                if ($('#custom_resolve').prop('checked'))
                {
                  $('#custom_resolve-sets').show();
                }
                else
                {
                  $('#custom_resolve-sets').hide();
                }
                break;
            case 'manual':
                $('#manualSets').show();
                $('#masqueradeSets').show();
                $('#custom_resolve-select').hide();
              break;
          }
        }).trigger('change');
        

      })
    }


    /* load the status */
    function status_load()
    {
      he.bkload( [ obj+".status" ] ).then( function(v){
          ltes = v[0];
          var info = ltes;
          var id = "#lte";
          /* status end btn */
          if ( info.status )
          {
              $(id).show();
              $(id+"_btn").html( '<i class="ace-icon fa fa-pause"></i>' );
              $(id+"_status").text( $.i18n(info.status) );
              if ( info.status == "up" )
              {
              }
              else if ( info.status == "uping" )
              {
                  if ( info.step && info.step != "online" )
                  {
                      $(id+"_status").text( $.i18n(info.step) );
                  }
              }
              else if ( info.status == "down" )
              {
                  $(id+"_btn").html( '<i class="ace-icon fa fa-play"></i>' );
                  if ( info.step && info.step != "online" )
                  {
                      $(id+"_status").text( $.i18n(info.step) );
                  }
              }
              if ( info.error )
              {
                  $(id+"_status").text( $.i18n(info.error) );
              }
          }
          else
          {
              $(id+"_btn").html( '<i class="ace-icon fa fa-play"></i>' );
              $(id+"_status").text( $.i18n("down") );
          }
          /* modom */
          $(id+"_operator").text( info.operator||' ' );
          $(id+"_nettype").text( info.nettype||' ' );
          if ( info.rssi )
          {
              $(id+"_rssi").text( info.rssi+"dBm" );
          }
          if ( info.signal )
          {
              $(id+"_rssiimg").attr( "src", "/assets/css/images/signal_"+info.signal+".png" );            
          }
          else
          {
              $(id+"_rssiimg").attr( "src", "/assets/css/images/signal_0.png" );            
          }
          if ( info.nettype5 && info.signal5 )
          {
              $(id+"_nettype").text( info.nettype5||' ' );
              if ( info.rsrp5 )
              {
                  $(id+"_rssi").text( info.rsrp5+"dBm" );
              }
              if ( info.signal5 )
              {
                  $(id+"_rssiimg").attr( "src", "/assets/css/images/signal_"+info.signal5+".png" );            
              }
          }
          $(id+"_imei").text( info.imei||' ' );
          $(id+"_imsi").text( info.imsi||' ' );
          if ( info.simstate )
          {
              $(id+"_iccid").text( $.i18n(info.simstate)+"["+(info.iccid||' ')+"]" );
          }
          else
          {
            $(id+"_iccid").text( info.iccid||' ' );
          }
          /* network */
          $(id+"_ip").text( info.ip||' ' );
          $(id+"_rxtx").text( byte2readable( (info.rx_bytes||"0") ) + " / " + byte2readable( (info.tx_bytes||"0") ) );
          $(id+"_livetime").text( info.livetime||' ' );
		  /* bsim */
		  if ( lte && lte.bsim )
		  {
		  	if ( info.bsim == "bsim" )
			{
				$( "#bsim_state" ).text( $.i18n("Backup simcard") );
			}
			else
			{
				$( "#bsim_state" ).text( $.i18n("Main simcard") );
			}
        }
      })
    }


    /* save the configure */
    function lte_save()
    {
      if ( lte == null )
      {
        return;
      }
      var ltecopy = JSON.parse(JSON.stringify(lte));;

      lte.netmode = $('#netmode').val();
      lte.watchnet_mode = $('#watchnet_mode').val();
      lte.watchnet2reset = $('#watchnet2reset').val();
      if ( lte.bsim )
      {
          lte.bsim = boole2able( $('#bsim').prop('checked') );
          if ( !lte.bsim_cfg )
          {
            lte.bsim_cfg = {};
          }
          lte.bsim_cfg.mode = $('#bsim_mode').val();
          lte.bsim_cfg.simcard_failed = $('#bsim_simcard_failed').val();
          lte.bsim_cfg.network_failed = $('#bsim_network_failed').val();
          lte.bsim_cfg.signal_failed = $('#bsim_signal_failed').val();
          lte.bsim_cfg.dial_failed = $('#bsim_dial_failed').val();
          lte.bsim_cfg.pin = $('#bsim_pin').val();
          lte.bsim_cfg.operator = boole2able( $('#bsim_operator').prop('checked') );
          if ( lte.bsim_cfg.operator == "enable" )
          {
            if ( !lte.bsim_cfg.operator_cfg )
            {
              lte.bsim_cfg.operator_cfg = {};
            }
            lte.bsim_cfg.operator_cfg.dial = $('#bsim_dial').val();
            lte.bsim_cfg.operator_cfg.apn = $('#bsim_apn').val();
            /* if ( !lte.bsim_cfg.operator_cfg.apn )
            {
                page.alert( { message: $.i18n('BSIM APN')+" "+$.i18n('can not be empty') } );
                return;
            } */
            lte.bsim_cfg.operator_cfg.user = $('#bsim_user').val();
            lte.bsim_cfg.operator_cfg.passwd = $('#bsim_password').val();
            lte.bsim_cfg.operator_cfg.type = $('#bsim_type').val();
            lte.bsim_cfg.operator_cfg.auth = $('#bsim_auth').val();
            lte.bsim_cfg.operator_cfg.cid = $('#bsim_cid').val();
            if ( lte.bsim_cfg.operator_cfg.cid && check.number(lte.bsim_cfg.operator_cfg.cid) == false )
            {
                page.alert( { message: $.i18n('BSIM Dial CID')+" "+$.i18n('must be a valid number') } );
                return;
            }
          }
      }
      lte.pin = $('#pin').val();
      lte.operator = boole2able( $('#operator').prop('checked') );
      if ( lte.operator == "enable" )
      {
        if ( !lte.operator_cfg )
        {
          lte.operator_cfg = {};
        }
        lte.operator_cfg.dial = $('#dial').val();
        lte.operator_cfg.apn = $('#apn').val();
        /* if ( !lte.operator_cfg.apn )
        {
            page.alert( { message: $.i18n('APN')+" "+$.i18n('can not be empty') } );
            return;
        } */
        lte.operator_cfg.user = $('#user').val();
        lte.operator_cfg.passwd = $('#password').val();
        lte.operator_cfg.type = $('#type').val();
        lte.operator_cfg.auth = $('#auth').val();
        lte.operator_cfg.cid = $('#cid').val();
        if ( lte.operator_cfg.cid && check.number(lte.operator_cfg.cid) == false )
        {
            page.alert( { message: $.i18n('Dial CID')+" "+$.i18n('must be a valid number') } );
            return;
        }
      }
      /* IPV4 */
      lte.masq = boole2able( $('#masq').prop('checked') );
      lte.mode = $('#dialmode').val();
      if ( lte.mode == "ppp" )
      {
        if ( !lte.ppp )
        {
          lte.ppp = {};
        }
        lte.ppp.custom_dns = boole2able( $('#custom_dns').prop('checked') );
        if ( lte.ppp.custom_dns == "enable" )
        {
          lte.ppp.dns = $('#cdns').val();
          if ( check.ip(lte.ppp.dns) == false )
          {
              page.alert( { message: $.i18n('DNS')+" "+$.i18n('must be a valid IP address') } );
              return;
          }
          lte.ppp.dns2 = $('#cdns2').val();
          if ( lte.ppp.dns2 && check.ip(lte.ppp.dns) == false )
          {
              page.alert( { message: $.i18n('DNS')+" "+$.i18n('must be a valid IP address') } );
              return;
          }
        }
        lte.ppp.mtu = $('#mtu').val();
        if ( lte.ppp.mtu && check.number(lte.ppp.mtu) == false )
        {
            page.alert( { message: $.i18n('MTU')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.ppp.lcp_echo_interval = $('#lcp_echo_interval').val();
        if ( lte.ppp.lcp_echo_interval && check.number(lte.ppp.lcp_echo_interval) == false )
        {
            page.alert( { message: $.i18n('LCP Echo Interval')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.ppp.lcp_echo_failure = $('#lcp_echo_failure').val();
        if ( lte.ppp.lcp_echo_failure && check.number(lte.ppp.lcp_echo_failure) == false )
        {
            page.alert( { message: $.i18n('LCP Echo Times')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.ppp.pppopt = $('#pppopt').val();
      }
      else if ( lte.mode == "dhcpc" )
      {
        if ( !lte.dhcpc )
        {
          lte.dhcpc = {};
        }
        lte.dhcpc.custom_dns = boole2able( $('#custom_dns').prop('checked') );
        if ( lte.dhcpc.custom_dns == "enable" )
        {
          lte.dhcpc.dns = $('#cdns').val();
          if ( check.ip(lte.dhcpc.dns) == false )
          {
              page.alert( { message: $.i18n('DNS')+" "+$.i18n('must be a valid IP address') } );
              return;
          }
          lte.dhcpc.dns2 = $('#cdns2').val();
          if ( lte.dhcpc.dns2 && check.ip(lte.dhcpc.dns) == false )
          {
              page.alert( { message: $.i18n('DNS')+" "+$.i18n('must be a valid IP address') } );
              return;
          }
        }
      }
      else if ( lte.mode == "static" )
      {
        if ( !lte.static )
        {
            lte.static = {};
        }
        if ( !lte.static.ipaddr )
        {
            lte.static.ipaddr = {};
        }
        lte.static.ipaddr.ip = $('#ip').val();
        if ( check.ip(lte.static.ipaddr.ip) == false )
        {
            page.alert( { message: $.i18n('IP Address')+" "+$.i18n('must be a valid IP address') } );
            return;
        }
        lte.static.ipaddr.mask = $('#mask').val();
        if ( check.ip(lte.static.ipaddr.mask) == false )
        {
            page.alert( { message: $.i18n('Subnet Mask')+" "+$.i18n('must be a valid IP address') } );
            return;
        }
        lte.static.gw = $('#gw').val();
        if ( lte.static.gw && check.ip(lte.static.gw) == false )
        {
            page.alert( { message: $.i18n('Gateway')+" "+$.i18n('must be a valid IP address') } );
            return;
        }
        lte.static.dns = $('#dns').val();
        if ( lte.static.dns && check.ip(lte.static.dns) == false )
        {
            page.alert( { message: $.i18n('DNS')+" "+$.i18n('must be a valid IP address') } );
            return;
        }
        lte.static.dns2 = $('#dns2').val();
        if ( lte.static.dns2 && check.ip(lte.static.dns2) == false )
        {
            page.alert( { message: $.i18n('DNS2')+" "+$.i18n('must be a valid IP address') } );
            return;
        }
      }
      /* IPV6 */
      if ( lte.method )
      {
          lte.masquerade = boole2able( $('#masquerade').prop('checked') );
          lte.method = $('#method').val();
          if ( lte.method == "manual" )
          {
            if ( !lte.manual )
            {
                lte.manual = {};
            }
            lte.manual.addr = $('#addr').val();
            if ( check.ipv6(lte.manual.addr) == false )
            {
                page.alert( { message: $.i18n('IPv6 Address')+" "+$.i18n('must be a valid IPv6 address') } );
                return;
            }
            lte.manual.prefix = $('#prefix').val();
            if ( lte.manual.prefix && ( lte.manual.prefix < 0 || lte.manual.prefix > 128 ) )
            {
                page.alert( { message: $.i18n('Subnet Prefix')+" "+$.i18n('must be a number(0-128)') } );
                return;
            }
            lte.manual.hop = $('#hop').val();
            if ( lte.manual.hop && check.ipv6(lte.manual.hop) == false )
            {
                page.alert( { message: $.i18n('Next Ho')+" "+$.i18n('must be a valid IPv6 address') } );
                return;
            }
            lte.manual.resolve = $('#resolve').val();
            if ( lte.manual.resolve && check.ipv6(lte.manual.resolve) == false )
            {
                page.alert( { message: $.i18n('DNS')+" "+$.i18n('must be a valid IPv6 address') } );
                return;
            }
            lte.manual.resolve2 = $('#resolve2').val();
            if ( lte.manual.resolve2 && check.ipv6(lte.manual.resolve2) == false )
            {
                page.alert( { message: $.i18n('DNS2')+" "+$.i18n('must be a valid IPv6 address') } );
                return;
            }
          }
          else if ( lte.method == "slaac" )
          {
            if ( !lte.slaac )
            {
              lte.slaac = {};
            }
            lte.slaac.custom_resolve = boole2able( $('#custom_resolve').prop('checked') );
            if ( lte.slaac.custom_resolve == "enable" )
            {
              lte.slaac.resolve = $('#cresolve').val();
              if ( check.ipv6(lte.slaac.resolve) == false )
              {
                  page.alert( { message: $.i18n('IPv6 DNS')+" "+$.i18n('must be a valid IPv6 address') } );
                  return;
              }
              lte.slaac.resolve2 = $('#cresolve2').val();
              if ( lte.slaac.resolve2 && check.ipv6(lte.slaac.resolve2) == false )
              {
                  page.alert( { message: $.i18n('IPv6 DNS2')+" "+$.i18n('must be a valid IPv6 address') } );
                  return;
              }
            }
          }
          else if ( lte.method == "automatic" )
          {
            if ( !lte.automatic )
            {
              lte.automatic = {};
            }
            lte.automatic.custom_resolve = boole2able( $('#custom_resolve').prop('checked') );
            if ( lte.automatic.custom_resolve == "enable" )
            {
              lte.automatic.resolve = $('#cresolve').val();
              if ( check.ipv6(lte.automatic.resolve) == false )
              {
                  page.alert( { message: $.i18n('IPv6 DNS')+" "+$.i18n('must be a valid IPv6 address') } );
                  return;
              }
              lte.automatic.resolve2 = $('#cresolve2').val();
              if ( lte.automatic.resolve2 && check.ipv6(lte.automatic.resolve2) == false )
              {
                  page.alert( { message: $.i18n('IPv6 DNS2')+" "+$.i18n('must be a valid IPv6 address') } );
                  return;
              }
            }
          }
      }
      /* Keeplive */
      if ( !lte.keeplive )
      {
        lte.keeplive = {};
      }
      lte.keeplive.type = $('#keeplive').val();
      if ( lte.keeplive.type == "icmp" )
      {
        if ( !lte.keeplive.icmp )
        {
          lte.keeplive.icmp = {};
        }
        if ( !lte.keeplive.icmp.dest )
        {
          lte.keeplive.icmp.dest = {};
        }
        lte.keeplive.icmp.dest.test = $('#icmp_test').val();
        if ( !lte.keeplive.icmp.dest.test )
        {
            page.alert( { message: $.i18n('Test Address')+" "+$.i18n('can not be empty') } );
            return;
        }
        lte.keeplive.icmp.dest.test2 = $('#icmp_test2').val();
        lte.keeplive.icmp.dest.test3 = $('#icmp_test3').val();
        lte.keeplive.icmp.timeout = $('#icmp_timeout').val();
        if ( check.number(lte.keeplive.icmp.timeout) == false )
        {
            page.alert( { message: $.i18n('Each Query Timeout(sec)')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.keeplive.icmp.failed = $('#icmp_failed').val();
        if ( check.number(lte.keeplive.icmp.failed) == false )
        {
            page.alert( { message: $.i18n('Test Times')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.keeplive.icmp.interval = $('#icmp_interval').val();
        if ( check.number(lte.keeplive.icmp.interval) == false )
        {
            page.alert( { message: $.i18n('Test Interval(sec)')+" "+$.i18n('must be a valid number') } );
            return;
        }
      }
      else if ( lte.keeplive.type == "recv" )
      {
        if ( !lte.keeplive.recv )
        {
          lte.keeplive.recv = {};
        }
        lte.keeplive.recv.timeout = $('#recv_timeout').val();
        if ( check.number(lte.keeplive.recv.timeout) == false )
        {
            page.alert( { message: $.i18n('Duration(sec)')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.keeplive.recv.failed = $('#recv_failed').val();
        if ( check.number(lte.keeplive.recv.failed) == false )
        {
            page.alert( { message: $.i18n('Test Times')+" "+$.i18n('must be a valid number') } );
            return;
        }
        lte.keeplive.recv.packets = $('#recv_packets').val();
        if ( check.number(lte.keeplive.recv.packets) == false )
        {
            page.alert( { message: $.i18n('Request packets')+" "+$.i18n('must be a valid number') } );
            return;
        }
      }
      if ( $('#gnss').prop('checked') == true )
      {
        if ( !lte.gnss )
        {
            lte.gnss = {};
        }
        lte.gnss.status = "enable";
      }
      else
      {
        if ( lte.gnss )
        {
            lte.gnss.status = "disable";
        }
      }

      if ( ocompare( lte, ltecopy ) )
      {
          page.alert( { message: $.i18n('Settings unchanged') } );
          return;
      }
      page.confirm( { message: $.i18n('The LTE connecttion will be disconneted because of the change of configuration') } ).then( function(result){
        if ( result )
        {
          he.save( [ obj+"="+JSON.stringify(lte)] ).then( function(){
            page.hint2succeed( $.i18n('Modify successfully') );
            lte_load();
          });
        }
      });
    }



    /* init */
    page.password('password', 'password-icon' );
    page.password('bsim_password', 'bsim_password-icon' );
    $.i18n().load( page.lang('lte') ).then( function () {
      /* init the langauage */
      $.i18n().locale = lang; $('body').i18n();
      /* init the network mode select */
      $("#netmode").append("<option value='auto'>" + $.i18n("Auto") + "</option>");
      if ( obj == "ifname@lte" )
      {
          $("#netmode").append("<option value='lte'>" + "LTE(4G)" + "</option>");
          $("#netmode").append("<option value='wcdma'>" + "WCDMA" + "</option>");
          $("#netmode").append("<option value='tdscdma'>" + "TDSCDMA" + "</option>");
          $("#netmode").append("<option value='evdo'>" + "EVDO" + "</option>");
          $("#netmode").append("<option value='cdma'>" + "CDMA" + "</option>");
          $("#netmode").append("<option value='gsm'>" + "GSM" + "</option>");
      }
      else if ( obj == "ifname@lte2" )
      {
          $("#netmode").append("<option value='nsa'>" + "NSA(5G)" + "</option>");
          $("#netmode").append("<option value='sa'>" + "SA(5G)" + "</option>");
          $("#netmode").append("<option value='lte'>" + "LTE(4G)" + "</option>");
          $("#netmode").append("<option value='wcdma'>" + "WCDMA" + "</option>");
          $("#netmode").append("<option value='tdscdma'>" + "TDSCDMA" + "</option>");
          $("#netmode").append("<option value='evdo'>" + "EVDO" + "</option>");
          $("#netmode").append("<option value='cdma'>" + "CDMA" + "</option>");
          $("#netmode").append("<option value='gsm'>" + "GSM" + "</option>");
      }
      /* init the dial mode select */
      $("#dialmode").append("<option value=''>"+$.i18n('Advise')+"</option>");
      if ( obj == "ifname@lte" )
      {
          $("#dialmode").append("<option value='ppp'>"+$.i18n('PPP')+"</option>");
      }
      $("#dialmode").append("<option value='dhcpc'>"+$.i18n('DHCP')+"</option>");
      $("#dialmode").append("<option value='static'>"+$.i18n('Static IP')+"</option>");
      /* load the configure */
      status_load(); // load first for show the operator_advise
      lte_load();
      $('#lte_btn').on(ace.click_event, function () {
          if ( ltes.status == "down" )
          {
              he.exec( ['arch@debug.ttyd_kill',obj+'.setup'] ).then( function(result){status_load();} );
          }
          else
          {
              he.exec( obj+'.shut').then( function(result){status_load();} );
          }
      });

      // 设置定时器
      page.timing({
        refresh: function ()
        {
            status_load();
        },
        interval: 3000
      });
      
      /* bind the refresh */
      $('#refresh').on(ace.click_event, function () {
        location.reload();
      });
      /* bind the apply */
      $('#apply').on(ace.click_event, function () {
        lte_save();
      });
    });

  })();
</script>
